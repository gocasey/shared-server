language: node_js
node_js:
- '8'
cache:
  directories:
  - node_modules
install: npm install
stages:
- lint
- test
- coverage
- deploy
jobs:
  include:
  - stage: lint
    script: npm run lint
  - stage: test
    script: npm test
  - stage: coverage
    script: npm run coverage_dev
  - stage: deploy
    script: ignore
    deploy: &heroku
      on:
        branch: master
      provider: heroku
      app: stories-shared-server
      api_key:
        secure: XmHtrGGyiB4BtNJG8bmwx4O3/A5vJ0yEy0+zUAVdR1NM+2PR0nkRX6WMjJD0+Jv8yoEjnhPI2wbuciUvpexi0WmGQBs5aZLE8bH5cdbY8502OrdsbMY9PhLm7ijdYRLz7pQ8WV+TiCfmjKpntgzmXuBiorGPizhFnYed9qFLPWDCmDPJVdkeVC2xCelDZBw4Zuo/Az7WiiHQf7J/UFpnWgqc0e/cM8NPVt1V0SGIUmWjid55pRkUfLhKqZhrqISDk+b/JR6QeN54tU4VwrE2/IQY8qfNMuYTqKY2V8pVTmT2gEE7ZLJZ/pCOT8QBry0q1WQnfgDQD00iQGQ0wtBus22glHPWVcUz0IsLk94xS2SGG3Tel2s1Y4ED9zICcPwSYggsHKm8HOex4Ngx7hBgXtlufZAjfnUUCeXU0xtCsZUyoBbfsYHjIWYNUhBAKT4aM5C28MVLdTq9cc8bnJKA0piMsH4Q+pQaUhNzecrmUt3kFyG8zfLWeSmvQc2WE9ET56TgBz/+ghNWduymwzNvFH795FOhAarUtnX0V+LlXx1cZ9J+4Q7gdBZw2RSFUyMg907UpX3sc8aARqFRluqE5HAbH8W3HM7X3/rUmmXLaXrtxrYB70ui7mIFr13ZnY7YwIHmGwRb28h4ByaMTtfQU2zXQn2xI/uwtjaFsDhhlww=

